<!DOCTYPE html>
<html lang="ro">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Configurare Joc - Ce Spun Românii</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="setup.css" />
  </head>
  <body
    class="bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 min-h-screen"
  >
    <div class="container mx-auto px-4 py-6 md:py-8">
      <!-- Header -->
      <div class="text-center mb-6 md:mb-8">
        <h1 class="text-2xl md:text-4xl font-bold text-white mb-2">
          Configurare Joc
        </h1>
        <p class="text-blue-200 text-sm md:text-base">
          Pregătește-ți jocul perfect!
        </p>
      </div>

      <!-- Setup Form -->
      <div class="max-w-4xl mx-auto space-y-4 md:space-y-6">
        <!-- Step 1: Choose Game Type -->
        <div
          class="bg-white/10 backdrop-blur-md rounded-xl p-4 md:p-6 border border-white/20"
        >
          <h2 class="text-lg md:text-xl font-bold text-white mb-4">
            <i class="fas fa-cog mr-2"></i>
            Pas 1: Tip de Joc
          </h2>
          <div class="grid gap-3 md:grid-cols-2 md:gap-4">
            <div
              class="game-type-option category-btn rounded-lg p-4 cursor-pointer"
              data-type="quick"
            >
              <div class="text-center">
                <i
                  class="fas fa-bolt text-2xl md:text-3xl text-yellow-400 mb-2"
                ></i>
                <h3 class="text-white font-semibold text-sm md:text-base">
                  Joc Rapid
                </h3>
                <p class="text-blue-200 text-xs md:text-sm">
                  Alege unul dintre seturile de întrebări disponibile
                </p>
              </div>
            </div>
            <div
              class="game-type-option category-btn rounded-lg p-4 cursor-pointer"
              data-type="custom"
            >
              <div class="text-center">
                <i
                  class="fas fa-wrench text-2xl md:text-3xl text-blue-400 mb-2"
                ></i>
                <h3 class="text-white font-semibold text-sm md:text-base">
                  Joc Personalizat
                </h3>
                <p class="text-blue-200 text-xs md:text-sm">
                  Selectează întrebările pentru jocul tău
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Step 2: Question Selection -->
        <div
          id="questionSection"
          class="bg-white/10 backdrop-blur-md rounded-xl p-4 md:p-6 border border-white/20 hidden"
        >
          <h2 class="text-lg md:text-xl font-bold text-white mb-4">
            <i class="fas fa-question-circle mr-2"></i>
            Pas 2: Selectează Întrebările
          </h2>

          <!-- Quick Game Sets -->
          <div id="quickGameSets" class="hidden">
            <div class="mb-4">
              <input
                type="text"
                id="setSearch"
                placeholder="Caută un set de întrebări..."
                class="w-full px-4 py-3 rounded-lg text-white placeholder-blue-200 search-input focus:outline-none focus:ring-2 focus:ring-blue-400"
              />
            </div>
            <div
              id="availableSets"
              class="grid gap-3 md:grid-cols-2 lg:grid-cols-3 md:gap-4"
            >
              <!-- Sets will be loaded here -->
            </div>
          </div>

          <!-- Custom Game Questions -->
          <div id="customGameQuestions" class="hidden">
            <div class="mb-4">
              <input
                type="text"
                id="categorySearch"
                placeholder="Caută o categorie..."
                class="w-full px-4 py-3 rounded-lg text-white placeholder-blue-200 search-input focus:outline-none focus:ring-2 focus:ring-blue-400"
              />
            </div>

            <!-- All Categories button -->
            <div class="mb-4">
              <button
                id="allCategoriesBtn"
                class="category-btn rounded-lg px-4 py-2 cursor-pointer selected"
              >
                <i class="fas fa-list mr-2"></i>
                Toate Categoriile
              </button>
            </div>

            <div
              id="availableCategories"
              class="grid grid-cols-2 gap-2 md:grid-cols-3 lg:grid-cols-4 md:gap-3 mb-6"
            >
              <!-- Categories will be loaded here -->
            </div>

            <div class="mb-4">
              <div class="flex items-center justify-between">
                <h3 class="text-white font-semibold text-sm md:text-base">
                  Întrebări disponibile
                </h3>
                <div class="text-blue-200 text-sm">
                  Selectate:
                  <span id="selectedCount" class="text-yellow-400 font-bold"
                    >0</span
                  >
                </div>
              </div>
            </div>

            <div
              id="availableQuestions"
              class="grid gap-3 md:grid-cols-2 md:gap-4 max-h-80 md:max-h-96 overflow-y-auto"
            >
              <!-- Questions will be loaded here -->
            </div>
          </div>
        </div>

        <!-- Step 3: Team Setup -->
        <div
          id="teamSection"
          class="bg-white/10 backdrop-blur-md rounded-xl p-4 md:p-6 border border-white/20 hidden"
        >
          <h2 class="text-lg md:text-xl font-bold text-white mb-4">
            <i class="fas fa-users mr-2"></i>
            Pas 3: Configurează Echipele
          </h2>
          <div class="space-y-4 md:grid md:grid-cols-2 md:gap-6 md:space-y-0">
            <div>
              <label
                class="block text-white font-semibold mb-2 text-sm md:text-base"
                >Echipa 1</label
              >
              <input
                type="text"
                id="team1Name"
                placeholder="Nume echipa 1"
                class="w-full px-4 py-3 rounded-lg text-white placeholder-blue-200 search-input focus:outline-none focus:ring-2 focus:ring-blue-400"
              />
            </div>
            <div>
              <label
                class="block text-white font-semibold mb-2 text-sm md:text-base"
                >Echipa 2</label
              >
              <input
                type="text"
                id="team2Name"
                placeholder="Nume echipa 2"
                class="w-full px-4 py-3 rounded-lg text-white placeholder-blue-200 search-input focus:outline-none focus:ring-2 focus:ring-blue-400"
              />
            </div>
          </div>
        </div>

        <!-- Step 4: Game Creation -->
        <div
          id="createSection"
          class="bg-white/10 backdrop-blur-md rounded-xl p-4 md:p-6 border border-white/20 hidden"
        >
          <h2 class="text-lg md:text-xl font-bold text-white mb-4">
            <i class="fas fa-rocket mr-2"></i>
            Pas 4: Creează Jocul
          </h2>
          <div class="text-center">
            <button
              id="createGameBtn"
              class="w-full md:w-auto bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-4 px-8 rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 min-h-[56px]"
            >
              <i class="fas fa-play mr-2"></i>
              CREEAZĂ JOC
            </button>
          </div>
        </div>

        <!-- Loading -->
        <div
          id="loadingSection"
          class="bg-white/10 backdrop-blur-md rounded-xl p-4 md:p-6 border border-white/20 hidden"
        >
          <div class="text-center">
            <i
              class="fas fa-spinner fa-spin text-3xl md:text-4xl text-blue-400 mb-4"
            ></i>
            <p class="text-white text-sm md:text-base" id="loadingText">
              Se creează jocul...
            </p>
          </div>
        </div>

        <!-- Game Created -->
        <div
          id="gameCreatedSection"
          class="bg-white/10 backdrop-blur-md rounded-xl p-4 md:p-6 border border-white/20 hidden"
        >
          <div class="text-center">
            <i
              class="fas fa-check-circle text-3xl md:text-4xl text-green-400 mb-4"
            ></i>
            <h2 class="text-xl md:text-2xl font-bold text-white mb-4">
              Joc Creat!
            </h2>
            <div class="bg-black/30 rounded-lg p-4 mb-6">
              <p class="text-blue-200 mb-2 text-sm md:text-base">
                Codul jocului:
              </p>
              <div
                class="text-3xl md:text-4xl font-bold text-yellow-400 mb-2"
                id="gameCodeDisplay"
              ></div>
              <p class="text-xs md:text-sm text-blue-200">
                Împarte acest cod cu participanții
              </p>
            </div>
            <div class="space-y-3 md:space-y-4">
              <button
                id="openControlBtn"
                class="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all min-h-[56px]"
              >
                <i class="fas fa-gamepad mr-2"></i>
                INTRĂ ÎN CONTROL PANEL
              </button>
              <button
                id="openPublicBtn"
                class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all min-h-[56px]"
              >
                <i class="fas fa-tv mr-2"></i>
                DESCHIDE PUBLIC DISPLAY
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Back Button -->
      <div class="text-center mt-6 md:mt-8">
        <button
          onclick="history.back()"
          class="text-blue-200 hover:text-white transition-colors min-h-[44px] px-4 py-2"
        >
          <i class="fas fa-arrow-left mr-2"></i>
          Înapoi
        </button>
      </div>
    </div>

    <!-- Preview Modal -->
    <div
      id="previewModal"
      class="fixed inset-0 preview-modal hidden flex items-center justify-center z-50 p-4"
    >
      <div
        class="preview-content rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto p-4 md:p-6"
      >
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-lg md:text-xl font-bold text-white">
            Previzualizare
          </h3>
          <button
            id="closePreview"
            class="text-white hover:text-red-400 transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center"
          >
            <i class="fas fa-times text-xl md:text-2xl"></i>
          </button>
        </div>
        <div id="previewContent">
          <!-- Preview content will be loaded here -->
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase/client.js"></script>
    <script src="setup.js"></script>
  </body>
</html>
